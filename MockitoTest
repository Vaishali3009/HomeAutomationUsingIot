private String extractTransactionId(WebServiceMessage message) {
    try {
        // Convert Source to String
        Source source = message.getPayloadSource();
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        Transformer transformer = TransformerFactory.newInstance().newTransformer();
        transformer.transform(source, new StreamResult(out));
        String xmlString = out.toString(); // Converts bytes to string

        // Parse XML
        Document document = DocumentBuilderFactory.newInstance()
                .newDocumentBuilder()
                .parse(new InputSource(new StringReader(xmlString)));

        NodeList nodes = document.getElementsByTagName("transactionId");
        if (nodes.getLength() > 0) {
            log.info("transactionId found in request");
            return nodes.item(0).getTextContent();
        }

    } catch (Exception e) {
        log.warn("Failed to extract transactionId", e);
    }
    return null;
}
